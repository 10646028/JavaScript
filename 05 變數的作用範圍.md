# 05 變數的作用範圍

### (1) 區域變數及廣域變數

```
在函式中用var宣告一個變數時, 該變數的作用範圍在其被宣告的函式內, 是一個區域變數;
用var在函式外宣告一個變數時, 該變數可由各個函式共用, 稱為廣域變數.
```

```javascript
//------------------------------
// 宣告廣域變數
//------------------------------
var m = 50;  //廣域變數

//------------------------------
// 一個執行相加的函式
//------------------------------
function add(a, b=15){
    var m = a + b;  //區域變數
    return m;
}

//------------------------------
// 主程式
//------------------------------
console.log(add(10, 20));   //30
console.log(m);   //50
```


### (2) 在函式中使用廣域變數

```
在函式中使用一個未經var宣告的變數, 實際使用的變數是由該函數向外一層一層找包覆它的區域, 
並且使用最近的那一層有宣告的變數, 向外找的最終點就是最外層的廣域變數.
```

```javascript
//------------------------------
// 宣告廣域變數
//------------------------------
var m = 50;  //廣域變數

//------------------------------
// 一個執行相加的函式
//------------------------------
function add(a, b=15){
    m = a + b;  //未宣告m, 將使用外層的變數
    return m;
}

//------------------------------
// 主程式
//------------------------------
console.log(add(10, 20));   //30
console.log(m);   //30
```


### (3) 內層函式使用外層函式的變數

```javascript
//------------------------------
// 宣告廣域變數
//------------------------------
var m = 50;  //廣域變數

//------------------------------
// 一個執行相加的函式
//------------------------------
function add(a, b=15){
    var m = 30;  //區域變數

    //函式中的函式
    function abc(){
        if(a > b){
            m = a*10 + b;  //使用外層m (區域變數)
        }else{
            m = a + b*10;  //使用外層m (區域變數)
        }
    };
    
    abc();         
    return m;
}

//------------------------------
// 主程式
//------------------------------
console.log(add(10, 20));   //210
console.log(m);   //50
```
